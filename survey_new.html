<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
	<meta name="theme-color" content="#ffffff" />
	<link rel="manifest" href="manifest.webmanifest" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="style.css" />
	<title>ì´í”¼ë‘</title>
</head>  
  <style>
:root{--primary:#16a34a;--primary-light:#dcfce7;--primary-dark:#15803d;--bg-color:#f8fafc;--card-bg:#ffffff;--text-main:#1f2937;--text-sub:#6b7280;--line:#e5e7eb;--radius:16px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,0.05);--shadow-md:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);--shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);--transition:all 0.3s cubic-bezier(0.4,0,0.2,1);}
form{width:98%}
.progress-container{padding:16px 20px 0;max-width:600px;margin:0 auto;width:100%;}
.progress-info{display:flex;justify-content:space-between;font-size:0.85rem;color:var(--text-sub);margin-bottom:8px;font-weight:600;}
.progress-info strong{color:var(--primary);}
.progress-track{height:6px;background:var(--line);border-radius:999px;overflow:hidden;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),#34d399);width:33%;transition:width 0.5s cubic-bezier(0.4,0,0.2,1);border-radius:999px;}
.survey-card{background:var(--card-bg);border-radius:var(--radius);box-shadow:var(--shadow-md);padding:5px 24px;width:100%;max-width:600px;margin-bottom:80px;opacity:0;transform:translateY(20px);display:none;transition:var(--transition);}
.survey-card.active{display:block;animation:slideUpFade 0.5s forwards;}
.survey-card.slide-out{animation:slideOutLeft 0.3s forwards;}
@keyframes slideUpFade{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
@keyframes slideOutLeft{from{opacity:1;transform:translateX(0);}to{opacity:0;transform:translateX(-20px);}}
.q-badge{display:inline-block;padding:4px 10px;background:var(--primary-light);color:var(--primary-dark);border-radius:999px;font-size:0.75rem;font-weight:700;margin-bottom:12px;}
.q-title{font-size:1.3rem;font-weight:800;color:var(--text-main);margin-bottom:10px;line-height:1.3;}
.q-sub{font-size:0.95rem;color:var(--text-sub);margin-bottom:24px;}
.field-group{margin-bottom:32px;}
.field-label{font-size:1rem;font-weight:700;margin-bottom:12px;display:block;color:var(--text-main);}
input[type="text"],input[type="number"],select{width:100%;padding:14px;border:2px solid var(--line);border-radius:12px;font-size:1rem;transition:var(--transition);background:#f9fafb;appearance:none;}
input:focus,select:focus{outline:none;border-color:var(--primary);background:#fff;box-shadow:0 0 0 4px var(--primary-light);}
.pill-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;}
.pill-label{position:relative;cursor:pointer;}
.pill-label input{position:absolute;opacity:0;width:0;height:0;}
.pill-content{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px;background:#fff;border:2px solid var(--line);border-radius:14px;text-align:center;transition:var(--transition);height:100%;font-weight:600;color:var(--text-sub);}
.pill-content i{font-size:1.5rem;margin-bottom:8px;color:#9ca3af;transition:color 0.3s;}
.pill-label input:checked+.pill-content{border-color:var(--primary);background:var(--primary-light);color:var(--primary-dark);box-shadow:0 4px 12px rgba(22,163,74,0.15);transform:translateY(-2px);}
.pill-label input:checked+.pill-content i{color:var(--primary);}
.pill-check{position:absolute;top:8px;right:8px;width:20px;height:20px;background:var(--primary);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;opacity:0;transform:scale(0);transition:var(--transition);}
.pill-label input:checked~.pill-check{opacity:1;transform:scale(1);}
.list-group{display:flex;flex-direction:column;gap:10px;}
.list-item{display:flex;align-items:center;padding:14px 16px;background:#fff;border:2px solid var(--line);border-radius:12px;cursor:pointer;transition:var(--transition);}
.list-item:hover{background:#f9fafb;}
.list-item input{margin-right:12px;accent-color:var(--primary);width:18px;height:18px;}
.list-item.selected{border-color:var(--primary);background:var(--primary-light);}
.reco-card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;margin-bottom:12px;display:flex;gap:12px;align-items:flex-start;}
.reco-icon{width:40px;height:40px;border-radius:10px;background:var(--primary-light);color:var(--primary);display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0;}
.reco-info h4{margin:0 0 4px 0;font-size:1rem;}
.reco-info p{margin:0;font-size:0.85rem;color:var(--text-sub);}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:center;justify-content:center;z-index:200;backdrop-filter:blur(2px);}
.modal-content{background:white;padding:24px;border-radius:20px;width:85%;max-width:320px;text-align:center;animation:popIn 0.3s cubic-bezier(0.175,0.885,0.32,1.275);}
@keyframes popIn{from{transform:scale(0.8);opacity:0;}to{transform:scale(1);opacity:1;}}
.modal-title{font-size:1.1rem;font-weight:800;margin-bottom:8px;}
.modal-msg{color:var(--text-sub);margin-bottom:20px;font-size:0.95rem;}
.modal-btn{width:100%;padding:12px;background:var(--primary);color:white;border:none;border-radius:12px;font-weight:700;cursor:pointer;}
  </style>
<body data-page="survey">
		<div class="app">
		<header>
			<div class="bar">
				<div class="logo"><a href="home.html" style="all:unset;cursor:pointer"><img src="img/logo.png" alt="ì´í”¼ë‘ ë¡œê³ "></a></div>
			</div>
		</header>
		
  <!-- Floating Progress -->
  <div class="progress-container">
    <div class="progress-info">
      <span><strong id="stepNow">1</strong> / 3</span>
      <span id="progressPercent">33%</span>
    </div>
    <div class="progress-track">
      <div class="progress-fill" id="progressBar"></div>
    </div>
  </div>

  <main id="wizardMain">
    
    <form id="surveyForm" onsubmit="return false;">
      
      <!-- STEP 1: Basic Info -->
      <section class="survey-card active" data-step="0">
        <span class="q-badge">Step 1</span>
        <div class="q-title">ì–´ë–¤ ë†ë¶€ë¥¼ ê¿ˆê¾¸ì‹œë‚˜ìš”?</div>
        <div class="q-sub">ê°€ì¥ ê°€ê¹Œìš´ ìœ í˜•ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</div>

        <div class="field-group">
          <label class="field-label">ìœ í˜•</label>
          <div class="pill-grid">
            <label class="pill-label">
              <input type="radio" name="user_type" value="young" checked>
              <div class="pill-content">
                <i class="fa-solid fa-user-graduate"></i>
                <span>ì²­ë…„ë†</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="user_type" value="successor">
              <div class="pill-content">
                <i class="fa-solid fa-users"></i>
                <span>í›„ê³„ë†</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="user_type" value="return">
              <div class="pill-content">
                <i class="fa-solid fa-tractor"></i>
                <span>ê·€ë† ì˜ˆì •</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="user_type" value="other">
              <div class="pill-content">
                <i class="fa-regular fa-face-smile"></i>
                <span>ì¼ë°˜ ì°½ì—…ì</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
          </div>
        </div>

        <div class="field-group">
          <label class="field-label">ì§€ì—­</label>
          <input type="text" name="region_si" placeholder="ì˜ˆ: ê²½ê¸°ë„ ê¹€í¬ì‹œ, ì¶©ë‚¨ í™ì„±êµ°" autocomplete="off">
        </div>
	  
	  <div class="field-group">
          <label class="field-label">ì •ì±…ìê¸ˆ ëŒ€ìƒ ì—¬ë¶€</label>
          <div class="pill-grid">
            <label class="pill-label">
              <input type="radio" name="policy" value="yes">
              <div class="pill-content">
                <i class="fa-solid fa-file-contract"></i>
                <span>ëŒ€ìƒ/ì‹ ì²­ ì˜ˆì •ì</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="policy" value="no">
              <div class="pill-content">
                <i class="fa-solid fa-ban"></i>
                <span>í•´ë‹¹ ì—†ìŒ</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="policy" value="unknown">
              <div class="pill-content">
                <i class="fa-regular fa-circle-question"></i>
                <span>ì˜ ëª¨ë¦„</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
          </div>
        </div>

        <div class="field-group">
          <label class="field-label">í¬ë§ ëŒ€ì¶œ ê·œëª¨ (ëŒ€ëµ)</label>
          <select name="loan_range">
            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
            <option value="none">ëŒ€ì¶œ ê³„íš ì—†ìŒ</option>
            <option value="lt100">1ì–µ ë¯¸ë§Œ</option>
            <option value="100_300">1ì–µ ~ 3ì–µ</option>
            <option value="gt300">3ì–µ ì´ìƒ</option>
          </select>
        </div>

        <div class="field-group">
          <label class="field-label">ë³´ìœ  ìê¸°ìë³¸ ë²”ìœ„ (ì„ íƒ)</label>
          <select name="own_capital">
            <option value="">ì„ íƒ ì•ˆ í•¨</option>
            <option value="lt30">3ì²œë§Œ ì› ë¯¸ë§Œ</option>
            <option value="30_100">3ì²œë§Œ ~ 1ì–µ</option>
            <option value="100_300">1ì–µ ~ 3ì–µ</option>
            <option value="gt300">3ì–µ ì´ìƒ</option>
          </select>
        </div>
	  </section>

      <!-- STEP 2: Environment -->
      <section class="survey-card" data-step="1">
        <span class="q-badge">Step 2</span>
        <div class="q-title">ì–´ë–¤ í™˜ê²½ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?</div>
        <div class="q-sub">ì‹œì„¤ ìœ í˜•ê³¼ ê·œëª¨ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ë§ì¶¤ ì„¤ê³„ë¥¼ ì œì•ˆí•´ ë“œë¦½ë‹ˆë‹¤.</div>

        <div class="field-group">
          <label class="field-label" style="margin-bottom:21px;">ì‹œì„¤ ìœ í˜•</label>
          <div class="pill-grid">
            <label class="pill-label">
              <input type="radio" name="facility" value="biz_center" checked>
              <div class="pill-content">
                <i class="fa-solid fa-city"></i>
                <span>ì§€ì‹ì‚°ì—…ì„¼í„°</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="facility" value="retail_space">
              <div class="pill-content">
                <i class="fa-regular fa-building"></i>
                <span>ìƒê°€/ê·¼ë¦°ìƒí™œì‹œì„¤</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
				<input type="radio" name="facility" value="panel_factory">
				<div class="pill-content">
				<i class="fa-solid fa-industry"></i>
				<span>íŒë„¬í˜• ì°½ê³ Â·ê³µì¥</span>
				</div>
				<div class="pill-check"><i class="fa-solid fa-check"></i></div>
			</label> 
             <label class="pill-label">
              <input type="radio" name="facility" value="etc">
              <div class="pill-content">
                <i class="fa-solid fa-ellipsis"></i>
                <span>ê¸°íƒ€(ë³µí™”ë¬¸í™”ê³µê°„, ì§€í•˜ ë“±)</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
          </div>
        </div>

       <!-- ê³µê°„ ìŠ¤í™ -->
<div class="field-group">
  <label class="field-label">ì „ìš© ë©´ì  (ã¡)</label>
  <input type="number" name="floor_area" placeholder="ìˆ«ìë§Œ ì…ë ¥ (ì˜ˆ: 100)" inputmode="numeric">
</div>

<div class="field-group">
  <label class="field-label">ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥ ë©´ì  (ã¡)</label>
  <input type="number" name="usable_area" placeholder="ìˆ«ìë§Œ ì…ë ¥ (ì˜ˆ: 80)" inputmode="numeric">
</div>

<div class="field-group">
  <label class="field-label">ì¸µê³  (m)</label>
  <input type="number" name="ceil_height" placeholder="ì˜ˆ: 3.5" inputmode="numeric">
</div>

<div class="field-group">
  <label class="field-label">ê¸°ë‘¥ ê°„ê²© / ìœ„ì¹˜</label>
  <input type="text" name="pillar_info" placeholder="ì˜ˆ: ê°„ê²© 6m, ì¤‘ì•™ 1ê°œ" />
</div>

<div class="field-group">
  <label class="field-label">ì¶œì… ë™ì„ </label>
  <input type="text" name="entrance_path" placeholder="ì˜ˆ: ë„ì–´ í­ 1.2m, í›„ë¬¸ ìˆìŒ" />
</div>

<hr style="margin:24px 0;">

<!-- ì¸í”„ë¼ -->
<div class="field-group">
  <label class="field-label">ê³„ì•½ ì „ë ¥ (kW)</label>
  <input type="number" name="electric_power" placeholder="ì˜ˆ: 20 (ëª¨ë¥´ë©´ ë¹„ì›Œë‘ì„¸ìš”)" inputmode="numeric">

  <div class="pill-grid" style="margin-top:8px;">
    <label class="pill-label">
      <input type="radio" name="electric_power_known" value="unknown">
      <div class="pill-content">
        <i class="fa-regular fa-circle-question"></i>
        <span>ëª¨ë¥´ê² ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>


<div class="field-group">
  <label class="field-label">ì „ê¸° ì„¤ë¹„</label>
  <div class="pill-grid" style="grid-template-columns: repeat(3, 1fr);">
    <label class="pill-label">
      <input type="radio" name="electric_phase" value="single">
      <div class="pill-content">
        <i class="fa-solid fa-plug"></i>
        <span>ë‹¨ìƒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="electric_phase" value="three">
      <div class="pill-content">
        <i class="fa-solid fa-bolt"></i>
        <span>3ìƒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="electric_phase" value="unknown">
      <div class="pill-content">
        <i class="fa-regular fa-circle-question"></i>
        <span>ëª¨ë¥´ê² ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>


<div class="field-group">
  <label class="field-label">ë¶„ì „ë°˜ ìœ„ì¹˜</label>
  <input type="text" name="panel_location" placeholder="ì˜ˆ: ìš°ì¸¡ ë²½ë©´ (ëª¨ë¥´ë©´ ë¹„ì›Œë‘ì„¸ìš”)" />

  <div class="pill-grid" style="margin-top:8px;">
    <label class="pill-label">
      <input type="radio" name="panel_location_known" value="unknown">
      <div class="pill-content">
        <i class="fa-regular fa-circle-question"></i>
        <span>ëª¨ë¥´ê² ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>


<div class="field-group">
  <label class="field-label">ê¸‰Â·ë°°ìˆ˜ ê°€ëŠ¥ ì—¬ë¶€</label>
  <div class="pill-grid" style="grid-template-columns: repeat(3, 1fr);">
    <label class="pill-label">
      <input type="radio" name="water_supply" value="yes">
      <div class="pill-content">
        <i class="fa-solid fa-droplet"></i>
        <span>ê°€ëŠ¥</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="water_supply" value="no">
      <div class="pill-content">
        <i class="fa-regular fa-circle-xmark"></i>
        <span>ë¶ˆê°€</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="water_supply" value="unknown">
      <div class="pill-content">
        <i class="fa-regular fa-circle-question"></i>
        <span>ëª¨ë¥´ê² ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>


<div class="field-group">
  <label class="field-label">ê¸‰Â·ë°°ìˆ˜ ìœ„ì¹˜</label>
  <input type="text" name="water_location" placeholder="ì˜ˆ: ì „ë©´ë¶€ 1m (ëª¨ë¥´ë©´ ë¹„ì›Œë‘ì„¸ìš”)" />

  <div class="pill-grid" style="margin-top:8px;">
    <label class="pill-label">
      <input type="radio" name="water_location_known" value="unknown">
      <div class="pill-content">
        <i class="fa-regular fa-circle-question"></i>
        <span>ëª¨ë¥´ê² ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>


<div class="field-group">
  <label class="field-label">í™˜ê¸°Â·ë°°ê¸°</label>
  <div class="pill-grid">
    <label class="pill-label">
      <input type="radio" name="ventilation" value="window">
      <div class="pill-content">
        <i class="fa-solid fa-wind"></i>
        <span>ì°½ ìˆìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="ventilation" value="duct">
      <div class="pill-content">
        <i class="fa-solid fa-fan"></i>
        <span>ë•íŠ¸ ìˆìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
    <label class="pill-label">
      <input type="radio" name="ventilation" value="none">
      <div class="pill-content">
        <i class="fa-regular fa-circle-xmark"></i>
        <span>ì—†ìŒ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>
</div>

  
    <div class="field-group">
    <label class="field-label">ì£¼ë‹¹ ê·¼ë¬´ ê°€ëŠ¥ ì‹œê°„</label>
    <select name="work_hours">
      <option value="">ì„ íƒí•´ ì£¼ì„¸ìš”</option>
      <option value="lt10">ì£¼ 10ì‹œê°„ ë¯¸ë§Œ</option>
      <option value="10_20">ì£¼ 10~20ì‹œê°„</option>
      <option value="20_40">ì£¼ 20~40ì‹œê°„</option>
      <option value="gt40">ì£¼ 40ì‹œê°„ ì´ìƒ</option>
    </select>
  </div>
  <div class="field-group">
    <label class="field-label">ìƒê·¼ ì—¬ë¶€</label>
    <div class="pill-grid" style="grid-template-columns: repeat(2, 1fr);">
      <label class="pill-label">
        <input type="radio" name="work_type" value="fulltime">
        <div class="pill-content">
          <i class="fa-solid fa-briefcase"></i>
          <span>ìƒê·¼<br>(í’€íƒ€ì„)</span>
        </div>
        <div class="pill-check"><i class="fa-solid fa-check"></i></div>
      </label>
      <label class="pill-label">
        <input type="radio" name="work_type" value="parttime">
        <div class="pill-content">
          <i class="fa-solid fa-moon"></i>
          <span>ë¶€ì—… / ê²¸ì—…</span>
        </div>
        <div class="pill-check"><i class="fa-solid fa-check"></i></div>
      </label>
    </div>
  </div>
    <div class="field-group">
    <label class="field-label">í•¨ê»˜ ì¼í•˜ëŠ” ì¸ì›</label>
    <input type="number" name="family_staff" placeholder="ë³¸ì¸ ì œì™¸ ì¸ì› ìˆ˜ (ì˜ˆ: 2)" inputmode="numeric">
  </div>
      </section>

      <!-- STEP 3: Goals -->
      <section class="survey-card" data-step="2">
        <span class="q-badge">Step 3</span>
        <div class="q-title">ëª©í‘œì™€ ì„ í˜¸ë„ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.</div>
        <div class="q-sub">ìˆ˜ìµ ëª©í‘œì™€ ë¦¬ìŠ¤í¬ ì„±í–¥ì— ë”°ë¼ ì‘ëª©ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</div>

        <div class="field-group">
          <label class="field-label">ëª©í‘œ ì›” ìˆ˜ìµ</label>
          <select name="profit_goal">
            <option value="" disabled selected>ì„ íƒí•´ ì£¼ì„¸ìš”</option>
            <option value="100">ì›” 100ë§Œì› ë¯¸ë§Œ (ì†Œì†Œí•˜ê²Œ)</option>
            <option value="300">ì›” 100~300ë§Œì› (ë¶€ì—… ìˆ˜ì¤€)</option>
            <option value="500">ì›” 300~500ë§Œì› (ì•ˆì •ì )</option>
            <option value="high">ì›” 500ë§Œì› ì´ìƒ (ê³ ìˆ˜ìµ)</option>
          </select>
        </div>

        <div class="field-group">
          <label class="field-label">ìš´ì˜ ì„±í–¥</label>
          <div class="pill-grid" style="grid-template-columns: 1fr 1fr 1fr;">
            <label class="pill-label">
              <input type="radio" name="risk" value="low" checked>
              <div class="pill-content" style="padding: 12px;">
                <i class="fa-solid fa-shield-cat"></i>
                <span>ì•ˆì •í˜•</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="risk" value="mid">
              <div class="pill-content" style="padding: 12px;">
                <i class="fa-solid fa-balance-scale"></i>
                <span>ì¤‘ë¦½í˜•</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
            <label class="pill-label">
              <input type="radio" name="risk" value="high">
              <div class="pill-content" style="padding: 12px;">
                <i class="fa-solid fa-rocket"></i>
                <span>ì„±ì¥í˜•</span>
              </div>
              <div class="pill-check"><i class="fa-solid fa-check"></i></div>
            </label>
          </div>
        </div>
		
		<!-- ìœ í†µ ê²½ë¡œ ì„ í˜¸ (ë³µìˆ˜ ì„ íƒ + ê¸°íƒ€ ì…ë ¥ ê°€ëŠ¥) -->
<div class="field-group">
  <label class="field-label">ìœ í†µ ê²½ë¡œ ì„ í˜¸ <span style="font-size:0.85rem; color:#6b7280;">(ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</span></label>
  
  <div class="pill-grid" style="grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));">
    <label class="pill-label">
      <input type="checkbox" name="distribution" value="wholesale">
      <div class="pill-content">
        <i class="fa-solid fa-truck"></i>
        <span>ë„ë§¤</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>

    <label class="pill-label">
      <input type="checkbox" name="distribution" value="horeca_retail">
      <div class="pill-content">
        <i class="fa-solid fa-box-open"></i>
        <span>ì‹ë‹¹/ì¹´í˜/ë¦¬í…Œì¼ ë‚©í’ˆ</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>

    <label class="pill-label">
      <input type="checkbox" name="distribution" value="experience_edu_landscape">
      <div class="pill-content">
        <i class="fa-solid fa-person-walking"></i>
        <span>ì²´í—˜Â·ê´€ê´‘Â·êµìœ¡Â·ì¡°ê²½ìš© ìœ„ì£¼</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
	
	<label class="pill-label">
      <input type="checkbox" name="distribution" value="mixed_use">
      <div class="pill-content">
        <i class="fa-solid fa-utensils"></i>
        <span>ë³µí•©(ìƒì‚°+ì²´í—˜/ì¡°ê²½)</span>
      </div>
      <div class="pill-check"><i class="fa-solid fa-check"></i></div>
    </label>
  </div>

  <!-- ê¸°íƒ€(ì„ íƒ ì—†ìŒ, ì…ë ¥ë§Œ) -->
  <input 
    type="text" 
    name="distribution_etc" 
    placeholder="ê·¸ ì™¸ ìœ í†µ ê²½ë¡œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."
    style="margin-top:12px;"
  >
</div>

    </div>
      </section>

    </form>
  </main>

  <!-- Navigation Bar -->
  <div class="bottom-bar">
    <button type="button" class="btn btn-prev" id="btnPrev" disabled>ì´ì „</button>
    <button type="button" class="btn btn-next" id="btnNext">ë‹¤ìŒ</button>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="customModal">
    <div class="modal-content">
      <div style="font-size: 2rem; margin-bottom: 12px;">ğŸŒ±</div>
      <div class="modal-title" id="modalTitle">ì•Œë¦¼</div>
      <div class="modal-msg" id="modalMsg">ë©”ì‹œì§€ ë‚´ìš©</div>
      <button class="modal-btn" id="btnCloseModal">í™•ì¸</button>
    </div>
  </div>
  <script src="app.js" defer></script>
  <script defer>
     (function () {
      const steps = Array.from(document.querySelectorAll('.survey-card'));
      const total = steps.length;
      const bar = document.getElementById('progressBar');
      const stepNow = document.getElementById('stepNow');
      const progressPercent = document.getElementById('progressPercent');
      const btnPrev = document.getElementById('btnPrev');
      const btnNext = document.getElementById('btnNext');
      const form = document.getElementById('surveyForm');
      let current = 0;

      document.querySelectorAll('.list-item input').forEach(input => {
        input.addEventListener('change', function() {
          const parent = this.closest('.list-item');
          if(this.type === 'radio') {

             const name = this.name;
             document.querySelectorAll(`input[name="${name}"]`).forEach(r => {
               r.closest('.list-item').classList.remove('selected');
             });
          }
          if(this.checked) parent.classList.add('selected');
          else parent.classList.remove('selected');
        });
      });

      function updateView() {
        const pct = Math.round(((current + 1) / total) * 100);
        bar.style.width = pct + '%';
        stepNow.textContent = current + 1;
        progressPercent.textContent = pct + '%';

        steps.forEach((s, idx) => {
          if (idx === current) {
            s.classList.remove('slide-out');
            s.classList.add('active');
          } else if (idx < current) {
             s.classList.remove('active');
             s.classList.add('slide-out');
             setTimeout(() => s.classList.remove('active'), 300);
          } else {
            s.classList.remove('active', 'slide-out');
          }
        });

        btnPrev.disabled = false;
        btnNext.innerHTML = (current === total - 1) ? 'ê²°ê³¼ ë³´ê¸° <i class="fa-solid fa-arrow-right"></i>' : 'ë‹¤ìŒ ë‹¨ê³„';
        
		const main = document.getElementById('wizardMain');
        main.scrollTo({ top: 0, behavior: 'smooth' });
      }

function showModal(msg) {
  const m = document.getElementById('customModal');
  document.getElementById('modalTitle').style.display = 'none';
  document.getElementById('modalMsg').textContent = msg;
  m.style.display = 'flex';
}
      
function closeModal() {
  document.getElementById('customModal').style.display = 'none';
}

const btnCloseModal = document.getElementById('btnCloseModal');
if (btnCloseModal) {
  btnCloseModal.addEventListener('click', closeModal);
}

     function validateStep(idx) {
  const section = steps[idx];

  if (idx === 0) {
    const region = section.querySelector('input[name="region_si"]').value.trim();
    const policy = section.querySelector('input[name="policy"]:checked');
    const loan = section.querySelector('select[name="loan_range"]').value;

    if (!region) { showModal('ì§€ì—­ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
    if (!policy) { showModal('ì •ì±…ìê¸ˆ ëŒ€ìƒ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!loan) { showModal('í¬ë§ ëŒ€ì¶œ ê·œëª¨ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
  }

  if (idx === 1) {
    const floorArea = section.querySelector('input[name="floor_area"]').value.trim();
    const usableArea = section.querySelector('input[name="usable_area"]').value.trim();
    const ceilHeight = section.querySelector('input[name="ceil_height"]').value.trim();
    const pillarInfo = section.querySelector('input[name="pillar_info"]').value.trim();
    const entrancePath = section.querySelector('input[name="entrance_path"]').value.trim();

    const electricPower = section.querySelector('input[name="electric_power"]').value.trim();
    const electricPowerKnown = section.querySelector('input[name="electric_power_known"]:checked');
    const electricPhase = section.querySelector('input[name="electric_phase"]:checked');

    const panelLocation = section.querySelector('input[name="panel_location"]').value.trim();
    const panelLocationKnown = section.querySelector('input[name="panel_location_known"]:checked');

    const waterSupply = section.querySelector('input[name="water_supply"]:checked');
    const waterLocation = section.querySelector('input[name="water_location"]').value.trim();
    const waterLocationKnown = section.querySelector('input[name="water_location_known"]:checked');

    const ventilation = section.querySelector('input[name="ventilation"]:checked');

    const workHours = section.querySelector('select[name="work_hours"]').value;
    const workType = section.querySelector('input[name="work_type"]:checked');
    const familyStaff = section.querySelector('input[name="family_staff"]').value.trim();

    if (!floorArea) { showModal('ì „ìš© ë©´ì ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
    if (!usableArea) { showModal('ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥ ë©´ì ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
    if (!ceilHeight) { showModal('ì¸µê³ ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
    if (!pillarInfo) { showModal('ê¸°ë‘¥ ê°„ê²© ë˜ëŠ” ìœ„ì¹˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
    if (!entrancePath) { showModal('ì¶œì… ë™ì„ ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }

    if (!electricPower && !electricPowerKnown) { showModal('ê³„ì•½ ì „ë ¥ì„ ì…ë ¥í•˜ê±°ë‚˜ ëª¨ë¥´ê² ìŒì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!electricPhase) { showModal('ì „ê¸° ì„¤ë¹„ í•­ëª©ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }

    if (!panelLocation && !panelLocationKnown) { showModal('ë¶„ì „ë°˜ ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ëª¨ë¥´ê² ìŒì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }

    if (!waterSupply) { showModal('ê¸‰Â·ë°°ìˆ˜ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!waterLocation && !waterLocationKnown) { showModal('ê¸‰Â·ë°°ìˆ˜ ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ëª¨ë¥´ê² ìŒì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }

    if (!ventilation) { showModal('í™˜ê¸° ë˜ëŠ” ë°°ê¸° ë°©ì‹ ì„ íƒì´ í•„ìš”í•©ë‹ˆë‹¤.'); return false; }

    if (!workHours) { showModal('ì£¼ë‹¹ ê·¼ë¬´ ê°€ëŠ¥ ì‹œê°„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!workType) { showModal('ìƒê·¼ ì—¬ë¶€ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!familyStaff) { showModal('í•¨ê»˜ ì¼í•˜ëŠ” ì¸ì› ìˆ˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
  }

  if (idx === 2) {
    const profit = section.querySelector('select[name="profit_goal"]').value;
    const distributionChecked = section.querySelector('input[name="distribution"]:checked');
    const distributionEtc = section.querySelector('input[name="distribution_etc"]').value.trim();

    if (!profit) { showModal('ëª©í‘œ ì›” ìˆ˜ìµì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return false; }
    if (!distributionChecked && !distributionEtc) { showModal('ìœ í†µ ê²½ë¡œë¥¼ ì„ íƒí•˜ê±°ë‚˜ ê¸°íƒ€ í•­ëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return false; }
  }

  return true;
}

function collectSmartFarmSurvey() {
  const getVal = (name) =>
    (form.querySelector(`[name="${name}"]`)?.value || '').trim();

  const getRadio = (name) => {
    const el = form.querySelector(`input[name="${name}"]:checked`);
    return el ? el.value : '';
  };

  const getMulti = (name) =>
    Array.from(form.querySelectorAll(`input[name="${name}"]:checked`))
      .map(i => i.value);

  return {
    createdAt: new Date().toISOString(),

    // STEP 1: ê¸°ë³¸ ì •ë³´
    step1: {
      user_type: getRadio('user_type'),
      region_si: getVal('region_si'),
      // region_climate í•„ë“œëŠ” ì„¤ë¬¸ì— ì—†ìœ¼ë‹ˆê¹Œ ì œê±°
      policy: getRadio('policy'),
      loan_range: getVal('loan_range'),
      own_capital: getVal('own_capital')
    },

    // STEP 2: í™˜ê²½/ê³µê°„/ì¸í”„ë¼
    step2: {
      facility: getRadio('facility'),

      // ê³µê°„ ìŠ¤í™
      floor_area: getVal('floor_area'),        // ì „ìš© ë©´ì (ã¡)
      usable_area: getVal('usable_area'),      // ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥ ë©´ì (ã¡)
      ceil_height: getVal('ceil_height'),      // ì¸µê³ (m)
      pillar_info: getVal('pillar_info'),      // ê¸°ë‘¥ ê°„ê²©/ìœ„ì¹˜
      entrance_path: getVal('entrance_path'),  // ì¶œì… ë™ì„ 

      // ì¸í”„ë¼ - ì „ê¸°
      electric_power: getVal('electric_power'),           // ê³„ì•½ ì „ë ¥(kW)
      electric_power_known: getRadio('electric_power_known'), // ëª¨ë¦„ ì—¬ë¶€
      electric_phase: getRadio('electric_phase'),         // ë‹¨ìƒ/3ìƒ/ëª¨ë¦„

      // ì¸í”„ë¼ - ë¶„ì „ë°˜
      panel_location: getVal('panel_location'),
      panel_location_known: getRadio('panel_location_known'),

      // ì¸í”„ë¼ - ê¸‰Â·ë°°ìˆ˜
      water_supply: getRadio('water_supply'),             // ê°€ëŠ¥/ë¶ˆê°€/ëª¨ë¦„
      water_location: getVal('water_location'),
      water_location_known: getRadio('water_location_known'),

      // ì¸í”„ë¼ - í™˜ê¸°/ë°°ê¸°
      ventilation: getRadio('ventilation'),               // window/duct/none

      // ìš´ì˜ ì¡°ê±´
      work_hours: getVal('work_hours'),
      work_type: getRadio('work_type'),
      family_staff: getVal('family_staff')
    },

    // STEP 3: ëª©í‘œ/ë¦¬ìŠ¤í¬/ìœ í†µ
    step3: {
      profit_goal: getVal('profit_goal'),
      risk: getRadio('risk'),
      distribution: getMulti('distribution'),
      distribution_etc: getVal('distribution_etc')
    }
  };
}

btnPrev.addEventListener('click', () => {
  if (current > 0) {
    // 1ë‹¨ê³„ ì´í›„ë¶€í„°ëŠ” ê·¸ëƒ¥ ì´ì „ ìŠ¤í…ìœ¼ë¡œ ì´ë™
    current--;
    updateView();
  } else {
    // current === 0 ì¼ ë•ŒëŠ” home.htmlë¡œ ì´ë™
    window.location.assign('home.html');
  }
});

btnNext.addEventListener('click', () => {
  // 1) í˜„ì¬ ë‹¨ê³„ ìœ íš¨ì„± ê²€ì‚¬
  if (!validateStep(current)) return;

  // 2) ë§ˆì§€ë§‰ ë‹¨ê³„ ì „ì´ë©´ ë‹¤ìŒ ìŠ¤í…ìœ¼ë¡œ ì´ë™
  if (current < total - 1) {
    current++;
    updateView();
  } else {
    // 3) ë§ˆì§€ë§‰ ë‹¨ê³„ë©´ ì„¤ë¬¸ ë°ì´í„° ì €ì¥ í›„ ì¶”ì²œ í˜ì´ì§€ë¡œ ì´ë™
    const surveyData = collectSmartFarmSurvey();
    localStorage.setItem('eprang-survey-latest', JSON.stringify(surveyData));
    window.location.assign('reco-intro_new.html');
  }
});

      // Init
      updateView();
    })();
  </script>
</body>
</html>